language: python
branches:
  only:
  - master
  - "/^\\d\\.\\d+$/"
matrix:
  include:
  - python: 3.6
    env: TOXENV=py36
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.6
    env: TOXENV=train
  - python: 3.7
    env: TOXENV=train
  - python: 3.8
    env: TOXENV=train
install:
- pip install -U pip tox codecov twine wheel
script: tox
after_success:
- codecov
cache:
  directories:
  - "$HOME/.cache/pip"
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: __token__
  password:
    secure: rEQqKnvBLFlz0WObCDk7eJtEOT6h9IyVNpahVWeF12elj7FR2FAvq+2z6MOPKo2NPeB+R2BNWvSlNQVUiespqWgYnPwpbj5gpHHCS0pqMtRrzqLLgwc752BwpVDgisJnQuJKzoeOUdn4dLaJ8oW5PHE7M8/cnOBWIDbRKH7i387W28GdfSBS+u5TkidYu4tCghfP3DLgaGRdZJ7NEHuL1G7j7Y6K9sU5svN/ebEv0QGGGahAN6QxJ1wnFEvVgEZ6hVqrMp7NYOVw6aWzOZjRIGTMpjtnw6Ebe5zDUfZ2H2QE00Uj4LU+K4kw/TyNRgf201gtLiaEObdNMYVaGQBgw8aWpVwn7zwYtBEjC3bcS8nDTtoPFOqzblj2IrlcoeFPycZ9M9zC3Ycb5Rp9IuAu9PlzRkOvVPUFxXaZYsDPKJ/qgJtTZ+p+7kyLquuhpriU85dCCXscRI+Tf4XPFgL9LK6CaEJccLpXjsiUwIYKBtUZAweheuUcLzUqGIltdLmeGtNuZgZJIrdyJ0Uj2k5rs3imyTLU2pOuVtQkPIqfuJdngBNux/yMqs6M5ltUJsQEkcKFyHnmjQXZtv/Fd2GHgcdaHlRzNcbGrHCdVs2JN6uGzK94SuxLiCnYNfuHsjojq6cm7f+Ea2Rdvrfw/3131XT8vABONf6ikjXeoWrPmQ4=
  on:
    branch: master
